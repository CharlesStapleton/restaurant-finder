<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/reset.css"/>
  <link rel="stylesheet" href="css/style.css"/>
  <title>Restaurant Finder</title>
</head>
<body>

  <h1>Restaurant Finder</h1>
  
    <div id="map"></div>
    <section id="user-form-container" class="tab-content" style="display: block;">
      <h2>RESTAURANT FINDER</h2>
      <section id="place" style="display: none;">
        <p><strong>Restaurants information</strong></p>
      </section>
        <div class="form-group" id="restaurant-code">
          <select id="restaurant-filter" class="form-control"
          onchange="filterMarkers(this.value)">
            <option id='stores'>-- Select your Restaurant --</option>
          
    <option value="MOD Pizza
    ">MOD Pizza</option>
  
    <option value="Blue Water Taco Grill
    ">Blue Water Taco Grill</option>
  
    <option value="caffe Ladro
    ">Caffe Labro</option>
  
=======
  <header>
    <nav> 
      <ul>        
        <li><a class="active" href="index.html">Map</a></li>
        <li><a href="details.html">Restaurant Details</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </nav>
  </header>

<h1>Restaurant Finder</h1>
    
<!-- <form class="example" action="/about.index">
  <input type="text" placeholder="Search.." name="search">
  <button type="submit"><i class="fa fa-search"></i></button>
</form> -->

<input id="pac-input" class="controls" type="text" placeholder="Search Box">
  <div id="map"></div>
  <section id="user-form-container" class="tab-content animated flipInX" style="display: block;">
    <section id="place" style="display: none;">
      <p><strong>Restaurants information</strong></p>
    </section>
    <form id=class="form-inline" id="user-form" style="display: block;">
      <div class="form-group" id="user-location-container">
        <input type="text" class="form-control" id="user-location" placeholder="Enter your location" autocomplete="off">
      </div>
      <div class="form-group" id="restaurant-code">
        <select id="restaurant-filter" class="form-control">

    <option>-- Select your Restaurant --</option>    
    <option value="MOD Pizza">MOD Pizza</option>
    <option value="Blue Water Taco Grill">Blue Water Taco Grill</option>
    <option value="Caffe Ladro">Caffe Ladro</option>

    <option value="Uptown Espresso Belltown">Uptown Espresso Belltown</option>
    <option value="Bedlam Coffee ">Bedlam Coffee</option>
    <option value="Cafe Solstice">Cafe Solstice</option>
    <option value="Bambinos Pizzeria">Bambinos Pizzeria</option>
    <option value="Shiro’s Sushi">Shiro’s Sushi</option>
    <option value="No Anchor">No Anchor</option>
    <option value="Thai On One">Thai On One</option>
    <option value="Rocco’s">Rocco’s</option>
    <option value="Taqueria Cantina">Taqueria Cantina</option>
    <option value="Plaza Garibaldi">Plaza Garibaldi</option>
    <option value="Mantra Thai Restaurant & Bar">Mantra Thai Restaurant & Bar</option>
    <option value="The 5 point Cafe">The 5 point Cafe</option>
    <option value="Zeeks Pizza">Zeeks Pizza</option>
    <option value="Green Leaf Vietnamese Restaurant">Green Leaf Vietnamese Restaurant</option>
    <option value="Eastern Cafe">Eastern Cafe</option>
    <option value="Tilikum Place Cafe">Tilikum Place Cafe</option>
    <option value="Sugar Bakery & Coffeehouse">Sugar Bakery & Coffeehouse</option>
  </select>
        </div>
      </form>
    </section>

<script>

  var rmarkers1 = [];
  var markers1 = [];
  
  //Restaurant markers
  markers1 = [
    ['0', 'Title', 47.619323, -122.341132, 'Mod Pizza'],
    ['1', 'Title', 47.623793, -122.357016, 'Blue Water Taco Grill'],
    ['2', 'Title', 47.625352, -122.356514, 'caffe Ladro'],
    ['3', 'Title', 47.617208, -122.346379, 'Uptown Espresso Belltown'],
    ['4', 'Title', 47.613769, -122.345676, ' Bedlam Coffee'],
    ['5', 'Title', 47.620947, -122.319769, 'Cafe Solstice'],
    ['6', 'Title', 47.617841, -122.347744, 'Bambinos Pizzeria'],
    ['7', 'Title', 47.614775, -122.347429, 'Shiro’s Sushi'],
    ['8', 'Title', 47.615290, -122.348389, 'No Anchor'],
    ['9', 'Title', 47.617212, -122.352632, 'Thai On One'],
    ['10', 'Title', 47.614016, -122.345114, 'Rocco’s'],
    ['11', 'Title', 47.615854, -122.350191, 'Taqueria Cantina'],
    ['12', 'Title', 47.619467, -122.355781, 'Plaza Garibaldi'],
    ['13', 'Title', 47.618311, -122.348449, 'Mantra Thai Restaurant & Bar'],
    ['14', 'Title',  47.618063, -122.347343, 'The 5 point Cafe'],
    ['15', 'Title', 47.618373, -122.347880, 'Zeeks Pizza'],
    ['16', 'Title', 47.616864, -122.351950, 'Green Leaf Vietnamese Restaurant'],
    ['17', 'Title', 47.597968, -122.324790, 'Eastern Cafe'],
    ['18', 'Title', 47.617841, -122.347629, 'Tilikum Place Cafe'],
    ['19', 'Title', 47.623287, -122.354610, 'Sugar Bakery & Coffeehouse'],
  ]
  var initMap = function(){
    console.log('SHOULD HAVE GOOGLE OBJECT', google)
        
        var seattle = {lat: 47.6111127,  lng: -122.3373602};

        var options = {
          center: seattle, //SEATTLE COORDINATES
          zoom: 14,
          mapTypeId: 'roadmap'

        };

        map = new 
        google.maps.Map(document.getElementById('map'), options);

        for (var i = 0; i <markers1.length; i ++){
          console.log('HTTING', markers1[i])
          addMarker(markers1[i])
        }

        function addMarker(marker){
          var title = marker[4];
          var pos = new 
          google.maps.LatLng(marker[2],
          marker[3]);

          var content = marker[4];
        
          marker1 = new
          google.maps.Marker({
            title: title,
            position: pos,
            // category: category,
            map: map

          });

          rmarkers1.push(marker1);
        
        // Marker click listener
        google.maps.event.addListener(marker1, 'click', (function (marker1, content) {
          return function () {
              console.log('Gmarker 1 gets pushed');
              infowindow.setContent(content);
              infowindow.open(map, marker1);
              map.panTo(this.getPosition());
              map.setZoom(15);
          }
        })(marker1, content));
        }
      }

      //Function to add marker to map

var filterMarkers = function (selectedStore) {
    for (i = 0; i < markers1.length; i++) {
        var marker = rmarkers1[i];
        // If is same category or category not picked
        var markerTitle = marker.title.toString().toLowerCase().split(' ').join('')
        var selectedTitle = selectedStore.toString().toLowerCase().split(' ').join('')
        console.log('MARKERT TIEL', markerTitle)
        if (markerTitle == selectedTitle) {
          console.log('HITTING STORE')
            marker.setVisible(true);
        }
        // Categories don't match 
        else {
            marker.setVisible(false);
        }
    }
}
</script>

    
    <!--Load the API from the specified URL
    * The async attribute allows the browser to render the page while the API loads
    * The key parameter will contain your own API key 
    * The callback parameter executes the initMap() function
    -->
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD0kHBkO9Rmi0fOKp4q5GlLZK6IgpX46z8&libraries=places&callback=initMap">
    </script> 
  

  <aside id="restaurant-info">
    <!-- <img id="restaurantImage" src="https://placehold.it/200x200/111" alt="" /> -->
    <ul id="restaurant-list"> </ul>
  </aside>
  
</body>
<script src="js/app.js"></script>
</html>